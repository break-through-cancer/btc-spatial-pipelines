nextflow_process {
    name    "Test ATLAS_GET"
    script  "modules/local/util/main.nf"
    process "ATLAS_GET"

    test("Should run ATLAS_GET successfully with local atlas") {

        tag "process"
        tag "atlas"

        when {
            params {
                max_memory = '4.GB'
                max_cpus   = 1
            }
            process {
                """
                input[0] = "${projectDir}/tests/data/atlas_small.h5ad"
                """
            }
        }

        then {
            assert process.success
            assert process.out.versions
        }
    }
}